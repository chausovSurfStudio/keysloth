# Обновление диапазона версии thor

Цель: обеспечить совместимость с thor в диапазоне '>= 1.0.1', '< 1.4.0' (консервативно), сохранив работоспособность и покрытие тестами.

## Таск-лист (выполнить по порядку)

1) Подготовка и анализ
- Проверить текущие точки интеграции с Thor в `lib/keysloth/cli.rb` (описания опций, help, ошибки)
- Сверить breaking changes Thor 1.0.x → 1.3.x (release notes)

2) Обновить зависимость
- В `keysloth.gemspec` заменить зависимость на: `spec.add_dependency 'thor', '>= 1.0.1', '< 1.4.0'`
- Обновить локальные зависимости: `bundle update thor` (для проверки на последнем доступном < 1.4.0)

3) Матрица совместимости (локально и/или CI)
- Добавить Appraisal (dev): `spec.add_development_dependency 'appraisal', '~> 2.5'`
- Создать `Appraisals` с наборами:
  - thor-1.0: `gem 'thor', '1.0.1'`
  - thor-1.3: `gem 'thor', '~> 1.3.2'`
- Установить и прогнать: `bundle exec appraisal install`
- Запустить тесты: `bundle exec appraisal thor-1.0 rspec` и `bundle exec appraisal thor-1.3 rspec`

4) Тесты (согласно правилам выполнения фичи)
- Убедиться, что весь набор тестов проходит на обоих наборах (1.0.1 и ~>1.3.2)
- При падениях — адаптировать код CLI или тесты под совместимый API Thor, не меняя публичное поведение

5) Качество кода
- Прогнать линтер: `bundle exec rake rubocop`
- Прогнать полную проверку: `bundle exec rake check`

6) Документация
- Обновить `CHANGELOG.md` для текущей версии из `lib/keysloth/version.rb` (раздел Changed):
  - «Диапазон совместимости Thor обновлён до '>= 1.0.1', '< 1.4.0'»

## Критерии приёмки
- Тесты проходят на `thor 1.0.1` и на `thor ~> 1.3.2`
- Никаких регрессий CLI (опции, help, коды завершения)
- Обновлены: `gemspec` (диапазон), `CHANGELOG.md`
