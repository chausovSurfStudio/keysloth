Конечная цель - создать ruby-gem и выложить его в публичный доступ.

Задачи, который должен решать ruby-gem:
- доставать из удаленного репозитория шифрованные файлы
- расшифровывать их
- позволять пользователю изменять файлы как обычные файлы в файловой системе
- шифровать их
- и выгружать обратно на удаленный репозиторий

Решаемая проблема:
- избавиться от хранения "секретов" напрямую в репозитории
- при этом инструмент должен помогать доставлять актуальные секреты до всех членов команды
- и до сборочных нод в рамках CI/CD
- и делать этот все буквальной одной консольной командой

Как я вижу замысел в целом:
- где-то будет находиться удаленный репозиторий
- в репозитории - будет определенная ветка
- в этой ветке лежат в зашифрованном виде "секреты" проекта - файлы с расширением .cer, .p12, .mobileprovisioning и обычные .json файлы
- шифрование происходит по определенному "паролю"
- все участники команды получают доступ к репозиторию и пароль, пароль на машинах участников команды лежит в скрытом файле, закрытым .gitignore
- на сборочной ноде есть сервисный аккаунт с доступом к репозиторию, пароль зашит в переменных окружения
- любой участник команды или пайплайн сборочной ноды путем указания репозитория, ветки и пароля получает возможность "стянуть" и расшифровать все секреты, при этом в проекте создается определенная папка, которая указана в .gitignore
- при необходимости внесения изменений в секреты - team lead проекта изменяет файлы (заменяет или подкладывает новые)
- и затем одной командой с указанием репозитория, ветки и пароля пушит эти изменения в удаленный репозиторий
- команды вызываются из командной строки (будет использован Makefile)

Таким образом получаем:
- первый контур защиты - к удаленному репозиторию должен быть прямой доступ
- второй - необходимо знание пароля для расшифровки секретов
- третий - в удаленном репозитории данные хранятся в шифрованном виде, его утечка не так страшна
- при этом есть возможность быстрой доствки измененных секретов до команды или сборочных нод
- система имеет минимальную зависимость от человеческого фактора и требует минимального количества ресурсов devops команды для настройки инструмента
- инструмент универсален для любых систем CI/CD, будть то jenkins, gitlab runner или что-либо другое

Технические ограничения:
- это должен быть ruby-gem
- код должен быть читаем и содержать комментарии, достаточные для понимания его сути
- инструмент должен иметь как минимум три команды
- первая - для получения, дешифровки и распаковки секретов в дирректорию по определенному пути секретов, в параметрах - адрес репозитория, ветка, пароль и путь до дирректирии, в которую надо распоковать секреты (и которую в случае отсутствия надо создать)
- вторая - для шифровки и отправки секретов обратно в удаленный репозиторий, параметры все те же
- третья - help-команда с описанием существующих в инструменте команд
- все команды публичного интерфейса должны быть покрыты подробными и исчерпывающими комментариями